display_menu_header_dvideos() {
    echo -e "${MENU_1_COLOR}"
    echo " ╔═════════════════════════════════════════════════╗ "
    echo " ║                 Movies & TV Shows               ║ "
    echo " ║             DESCARGAVIDEOS.TV  SCRIPT           ║ "
    echo " ╚═════════════════════════════════════════════════╝ ""${RESET}"

    # Prompt user for type (TV show or movie)
    prompt_for_type

    if [ "$type" == "tv" ]; then
        # Prompt user for TV show details
        prompt_for_show_details
        download_video_and_subtitles
    elif [ "$type" == "movie" ]; then
        # Prompt user for movie details
        prompt_for_movie_details
        download_movie
    else
        # Invalid input
        echo "Invalid type. Please enter 'tv' or 'movie'."
        exit 1
    fi

    pause
    goodbye
}

# Download video and subtitles for TV show
download_video_and_subtitles() {
    # Define output folder
    show_folder="${show_name}"
    mkdir -p "$show_folder"

    # Loop through each episode
    for ((episode_number = 10#$first_episode; episode_number <= 10#$last_episode; episode_number++)); do
        episode_number=$(printf "%02d" "$episode_number")
        video_filename="${show_folder}/${show_name}.S${season_number}E${episode_number}.${show_resolution}.WEBRip.x264.mp4"
        subtitle_filename="${show_folder}/${show_name}.S${season_number}E${episode_number}.${show_resolution}.WEBRip.x264.es.srt"

        # Prompt user for episode URL
        prompt "Enter the URL for Season $season_number Episode $episode_number (or leave blank to skip): " episode_url

        if [ -z "$episode_url" ]; then
            printf "Skipping Season $season_number Episode $episode_number.\n"
        else
            # Download video with Spanish language metadata
            ffmpeg -i "$episode_url" -metadata:s:a:0 language=spa -c copy "$video_filename"

            # Prompt user for subtitle URL
            prompt "Enter the URL for subtitles for Season $season_number Episode $episode_number (or leave blank if none): " subtitle_url

            # Download subtitles if URL provided
            if [ -n "$subtitle_url" ]; then
                ffmpeg -i "$subtitle_url" -c:s srt -metadata:s:s:0 language=spa "$subtitle_filename"
            else
                printf "No subtitle URL provided for Season $season_number Episode $episode_number.\n"
            fi
        fi
    done
}

# Download movie
download_movie() {
    filename="${movie_name}.${movie_year}.${movie_resolution}.WEBRip.x264.mp4"
    printf "\nDownloading %s...\n" "$filename"
    ffmpeg -i "$movie_url" -metadata:s:a:0 language=spa -c copy "$filename"
}

# Main function
main() {
    load_colors
    display_menu_header

    descargavideos

    pause
    goodbye
}

# Run the script
clear
main
