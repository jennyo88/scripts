#!/usr/bin/env bash

# Display introductory information about the script.
display_intro() {
    echo "TMUX QUICK REFERENCE"
    echo "-------------------"
    echo "This script provides an interactive quick reference for using tmux."
    echo ""
}

# Display the overall help message.
display_help() {
    echo "Options:"
    echo "  1. Basics"
    echo "  2. Windows and Panes"
    echo "  3. Session Management"
    echo "  4. Miscellaneous"
    echo "  q. Quit"
    echo ""
}

# Display basics section with tmux commands for starting and attaching sessions.
display_basics() {
    echo "1. BASICS"
    echo "----------"
    echo "a. Start a new session:"
    echo "   tmux"
    echo ""
    echo "b. Attach to an existing session:"
    echo "   tmux attach-session -t SESSION_NAME"
    echo ""
    echo "c. Detach from the current session (inside tmux):"
    echo "   Press Ctrl-b, then release and press d"
    echo ""
}

# Display windows and panes section with tmux commands for managing windows and panes.
display_windows_and_panes() {
    echo "2. WINDOWS AND PANES"
    echo "---------------------"
    echo "a. Create a new window:"
    echo "   Press Ctrl-b, then press c"
    echo ""
    echo "b. Switch between windows:"
    echo "   Press Ctrl-b, then press the window number or use arrow keys"
    echo ""
    echo "c. Split the current pane horizontally:"
    echo "   Press Ctrl-b, then press %"
    echo ""
    echo "d. Split the current pane vertically:"
    echo "   Press Ctrl-b, then press \""
    echo ""
    echo "e. Navigate between panes:"
    echo "   Press Ctrl-b, then press arrow keys"
    echo ""
}

# Display session management section with tmux commands for managing sessions.
display_session_management() {
    echo "3. SESSION MANAGEMENT"
    echo "----------------------"
    echo "a. List existing sessions:"
    echo "   tmux list-sessions"
    echo ""
    echo "b. Create a new session with a name:"
    echo "   tmux new-session -s SESSION_NAME"
    echo ""
    echo "c. Kill a session:"
    echo "   tmux kill-session -t SESSION_NAME"
    echo ""
}

# Display miscellaneous section with additional tmux commands.
display_miscellaneous() {
    echo "4. MISCELLANEOUS"
    echo "----------------"
    echo "a. Show tmux help:"
    echo "   tmux -h"
    echo ""
    echo "b. Reload tmux configuration:"
    echo "   Press Ctrl-b, then type :source-file ~/.tmux.conf"
    echo ""
}

# Main function to determine which section to display based on the user's choice.
main() {
    display_intro
    while true
    do
        display_help
        read -p "Enter the number of the section you want to explore (q to quit): " choice
        case $choice in
            1) display_basics ;;
            2) display_windows_and_panes ;;
            3) display_session_management ;;
            4) display_miscellaneous ;;
            q) echo "Exiting. Goodbye!"; exit 0 ;;
            *) echo "Invalid choice. Please enter a valid option." ;;
        esac
    done
}

# Call the main function to start the interactive mode.
main
