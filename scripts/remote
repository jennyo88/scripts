#!/usr/bin/env bash

# Script Name: loader.sh
# Description: Prompt the user to choose between Python and Bash scripts and execute the selected script.
# Author: Your Name
# Date: February 23, 2024
# Version: 2.0

# Functions:

# Function to display an error message
display_error() {
    echo "Error: $1"
}

# Function to download and execute a remote script
execute_remote_script() {
    local username=$1
    local repository=$2
    local branch=$3
    local script_path=$4

    # Construct the URL based on user input
    local remote_script_url="https://raw.githubusercontent.com/$username/$repository/$branch/$script_path"

    # Download the remote script using curl
    local script_contents=$(curl -fsSL "$remote_script_url")

    # Save the script to a file
    echo "$script_contents" > remote_script

    # Execute the script
    if bash remote_script; then
        echo "Script execution successful."
    else
        display_error "Failed to execute the remote script."
    fi
}

# Function to prompt user for script details
prompt_for_script_details() {
    read -p "Enter your GitHub username: " USERNAME
    read -p "Enter your repository name: " REPOSITORY
    read -p "Enter the branch (default: main): " BRANCH
    BRANCH=${BRANCH:-main}
    read -p "Enter the path to the script: " SCRIPT_PATH
}

# Main Script:

# Prompt the user to choose between Python and Bash scripts
echo "Choose the type of script:"
echo "1. Python"
echo "2. Bash"

read -p "Enter your choice (1 or 2): " choice

case $choice in
    1)
        # User chose Python script
        echo "You selected Python script."
        prompt_for_script_details
        ;;
    2)
        # User chose Bash script
        echo "You selected Bash script."
        prompt_for_script_details
        ;;
    *)
        display_error "Invalid choice. Exiting."
        exit 1
        ;;
esac

# Execute the remote script based on the user's choice and provided details
execute_remote_script "$USERNAME" "$REPOSITORY" "$BRANCH" "$SCRIPT_PATH"
