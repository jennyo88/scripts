#!/usr/bin/env bash

# Define the fixed path to the scripts on GitHub
SCRIPT_URL="https://github.com/jennyo88/scripts/raw/main/books/overdrive"

# Function to fetch and run the fixed script from GitHub
fetch_and_run_fixed_script() {
  local script_url=$1
  local audiobook_file=$2

  # Fetch the fixed script
  wget -q -O "overdrive" "$script_url"

  # Check if the script was fetched successfully
  if [ $? -eq 0 ]; then
    echo "Running fixed script: overdrive"
    # Run the fetched script with provided audiobook file name as argument
    bash "overdrive" download "$audiobook_file"
    # Remove the fetched script
    rm "overdrive"
  else
    echo "Failed to fetch script: $script_url"
  fi
}

# List directories in the current directory
echo "List of directories in the current directory:"
directories=($(ls -d */))
for directory in "${directories[@]}"; do
  echo "$directory"
done

# Prompt user to enter the old folder name
read -p "Enter the name of the folder created by overdrive: " old_folder_name

# Validate if the old folder name exists
if [[ ! -d "$old_folder_name" ]]; then
  echo "Error: Folder '$old_folder_name' does not exist."
  exit 1
fi

# Prompt user to enter the new folder name
read -p "Enter the new folder name (including any spaces): " new_folder_name

# Rename the folder to the new folder name
mv "$old_folder_name" "$new_folder_name"
pybind -d "$new_folder_name"
